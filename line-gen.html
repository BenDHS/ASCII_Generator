<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wave Through Static Lines Animation</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width = window.innerWidth;
        let height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;

        let d = Math.sqrt(width ** 2 + height ** 2);
        let moveSpeed = d / 4; // Pixels per second to cross the screen
        let spawnInterval = 2000; // Milliseconds between wave spawns
        let lineSpacing = 20; // Spacing between static lines along the move direction
        let baseWidth = 2; // Base line width
        let maxExtraWidth = 6; // Maximum extra width when wave passes
        let sigma = 20; // Controls the width of the wave effect (gaussian sigma)

        let lastTime = performance.now();
        let wavePositions = [];
        let lastSpawnTime = performance.now();
        let linePositions = [];

        function initLines() {
            linePositions = [];
            for (let o = -d; o <= d; o += lineSpacing) {
                linePositions.push(o);
            }
        }

        initLines();
        wavePositions.push(-d); // Start with one wave off-screen

        function drawLines() {
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#ffffff';

            for (let linePos of linePositions) {
                let extraWidth = 0;
                for (let wavePos of wavePositions) {
                    let dist = linePos - wavePos;
                    extraWidth += maxExtraWidth * Math.exp( -(dist ** 2) / (2 * sigma * sigma) );
                }
                ctx.lineWidth = baseWidth + extraWidth;

                const shiftX = linePos * (width / d);
                const shiftY = linePos * (-height / d);

                const startX = 0 + shiftX;
                const startY = 0 + shiftY;
                const endX = width + shiftX;
                const endY = height + shiftY;

                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            }
        }

        function animate() {
            const now = performance.now();
            const delta = (now - lastTime) / 1000;
            lastTime = now;

            // Update wave positions
            for (let i = wavePositions.length - 1; i >= 0; i--) {
                wavePositions[i] += delta * moveSpeed;
                if (wavePositions[i] > d) {
                    wavePositions.splice(i, 1);
                }
            }

            // Spawn new wave if interval passed
            if (now - lastSpawnTime >= spawnInterval) {
                wavePositions.push(-d);
                lastSpawnTime = now;
            }

            drawLines();
            requestAnimationFrame(animate);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            d = Math.sqrt(width ** 2 + height ** 2);
            moveSpeed = d / 2;
            initLines();
            // Wave positions are kept as-is; may cause minor glitch but simplifies
        });

        // Start animation
        animate();
    </script>
</body>
</html>
